<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

	<input type="checkbox" id="chkAll"  /> 전체 <br/><br/>		<!--checked, checked="checked", checked="true/false" -->
	<input type="checkbox" class="chk" />선택1<br/>
	<input type="checkbox" class="chk" />선택2<br/>
	<input type="checkbox" class="chk" />선택3<br/>
	<input type="checkbox" class="chk" />선택4<br/>
	<input type="checkbox" class="chk" />선택5<br/>

	<script type="text/javascript">
	
		onload = function() {
			// 1. 전체 선택 -> 개별 선택
			// chkAll 읽어 오기
			var chkAll = document.getElementById('chkAll');
			
			// click 했을 때 function의 기능 수행, onclick 속성
			chkAll.addEventListener('click', function() {
				// chkAll의 checked 속성 값을 class="chk"들에게 그대로 전달한다.
				// chkAll.checked          var chk_list = document.getElementsByClassName('chk;');    // 배열
				var chk_list = document.getElementsByClassName('chk');
				for (let i = 0; i < chk_list.length; i++) {
					chk_list[i].checked = chkAll.checked;	// 고정값을 순차적으로 보낸다. chkAll의 값에 따라 고정값이 바뀐다. 
				}
			});
			
			// 2. 개별 선택 -> 전체 선택
			var chk_list = document.getElementsByClassName('chk');
			for (let i = 0; i < chk_list.length; i++) {
				// 개별 선택을 하나 클릭하면
				chk_list[i].addEventListener('click', function() {
					// 개별 선택 전체를 살펴봐서 하나라도 checked가 없는 객체가 있으면
					// 전체 선택의 checked를 빼겠다.
					var chkAll = document.getElementById('chkAll');
					for (let j = 0; j < chk_list.length; j++) {
						if (chk_list[j].checked == false) {
							chkAll.checked = false;	// 전체 선택의 checked 속성 제거
							return;	// 이벤트 리스너인 익명 함수 종료
						}	// checked 속성이 없다.
					}
					// for (let j = 0; j < chk_list.length; j++) 코드가 끝났다는 것은
					// 모두 체크되어 있는 경우 뿐이다.
					chkAll.checked = true;	// 전체 선택의 checked 속성을 준다.
					//chkAll.checked = 'checked';
				});
			}
				
			
		}
	
	</script>

</body>
</html>